<div class="password-forgot-verification container">
  <div class="row">
    <div *ngIf="isVerified == true" class="col-md-6">
      <div class="title">Create a new password</div>
      <form [formGroup]="forgotPasswordResetForm" (submit)="onForgotPasswordResetFormSubmit()" class="p-2 pb-4">
        <div formGroupName="newPasswordGroup">
          <div class="form-group">
            <label for="newPassword"></label>
            <div class="password-container">
              <input
                type="password"
                id="newPassword"
                class="form-control"
                name="newPassword"
                placeholder="New Password"
                formControlName="newPassword"
                [maxlength]="240"
              />
              <div class="input-group-append">
                <button
                class="btn-toggle-password"
                type="button"
                (mousedown)="togglePasswordVisibility(true)" 
                (mouseup)="togglePasswordVisibility(false)"
                (mouseleave)="togglePasswordVisibility(false)">
                  <i class="fa" [ngClass]="{'fa-eye': showPassword, 'fa-eye-slash': !showPassword}"></i>
                </button>
              </div>
            </div>
            <span
              *ngIf="forgotPasswordResetForm.get('newPasswordGroup.newPassword').invalid && forgotPasswordResetForm.get('newPasswordGroup.newPassword').touched">
              <span *ngIf="forgotPasswordResetForm.get('newPasswordGroup.newPassword').errors['required']"
                class="alert-danger">This field is required!</span>
              <span *ngIf="forgotPasswordResetForm.get('newPasswordGroup.newPassword').errors['minlength']"
                class="alert-danger">The password should at least be 12 digits!</span>
              <span *ngIf="forgotPasswordResetForm.get('newPasswordGroup.newPassword').errors['maxlength']" class="alert-danger">The
                password should not exceed 128 digits!</span>
              <span *ngIf="forgotPasswordResetForm.get('newPasswordGroup.newPassword').errors['notStrong']" class="alert-danger">The
                password is not strong enough!</span>
            </span>
          </div>

          <div class="form-group">
            <label for="newPasswordConfirm"></label>
            <div class="password-container">
              <input
                type="password"
                id="newPasswordConfirm"
                class="form-control"
                name="newPasswordConfirm"
                placeholder="New Password Again"
                formControlName="newPasswordConfirm"
                [maxlength]="240"
              />
              <div class="input-group-append">
                <button
                class="btn-toggle-password"
                type="button"
                (mousedown)="togglePasswordConfirmVisibility(true)" 
                (mouseup)="togglePasswordConfirmVisibility(false)"
                (mouseleave)="togglePasswordConfirmVisibility(false)">
                  <i class="fa" [ngClass]="{'fa-eye': showPasswordConfirm, 'fa-eye-slash': !showPasswordConfirm}"></i>
                </button>
              </div>
            </div>
            <span
              *ngIf="forgotPasswordResetForm.get('newPasswordGroup.newPasswordConfirm').invalid && forgotPasswordResetForm.get('newPasswordGroup.newPasswordConfirm').touched">
              <span *ngIf="forgotPasswordResetForm.get('newPasswordGroup.newPasswordConfirm').errors['required']"
                class="alert-danger">This field is required!</span>
              <span *ngIf="forgotPasswordResetForm.get('newPasswordGroup.newPasswordConfirm').errors['minlength']"
                class="alert-danger">The password should at least be 12 digits!</span>
              <span *ngIf="forgotPasswordResetForm.get('newPasswordGroup.newPasswordConfirm').errors['maxlength']" class="alert-danger">The
                password should not exceed 128 digits!</span>
            </span>
          </div>

          <span
            *ngIf="forgotPasswordResetForm.get('newPasswordGroup').invalid && forgotPasswordResetForm.get('newPasswordGroup').touched">
            <span
              *ngIf="forgotPasswordResetForm.get('newPasswordGroup').errors != null && forgotPasswordResetForm.get('newPasswordGroup').errors['noMatch']"
              class="alert-danger">The passwords must match!</span>
          </span>

        </div>

        <button class="btn btn-info" style="width: 50%" type="submit"
          [disabled]="forgotPasswordResetForm.invalid || forgotPasswordResetForm.pending">
          Save
        </button>
      </form>
    </div>
    <div *ngIf="isVerified == false" class="col-md-6">
      An error occurred. Check if your link is valid and try again.
    </div>
  </div>
</div>
